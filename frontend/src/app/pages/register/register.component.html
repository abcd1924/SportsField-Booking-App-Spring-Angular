<body class="min-h-screen flex items-center justify-center pattern relative">
    <div class="absolute top-6 left-6">
        <p-button label="Regresar" icon="pi pi-arrow-left" variant="text" severity="success" routerLink="/"></p-button>
    </div>

    <div class="bg-white/95 backdrop-blur-sm shadow-2xl rounded-2xl p-8 w-full max-w-xl m-4">
        <!-- Header del registro-->
        <div class="text-center mb-8">
            <div class="text-6xl mb-4">üèüÔ∏è</div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">¬°√önete al Equipo!</h2>
            <p class="text-gray-600 text-lg">Crea tu cuenta y comienza a reservar canchas</p>

            <!-- Indicador de progreso visual-->
            <div class="mt-4 flex items-center justify-center gap-2">
                <div class="w-8 h-2 bg-green-500 rounded-full"></div>
                <div class="w-16 h-2 bg-green-200 rounded-full"></div>
                <div class="w-8 h-2 bg-green-100 rounded-full"></div>
            </div>
            <p class="text-xs text-gray-500 mt-2">Solo toma 2 minutos</p>
        </div>

        <!-- Mensaje de error/√©xito -->
        <div *ngIf="mensajeErrorGeneral"
            class="p-4 mb-6 text-sm text-red-700 bg-red-58 border border-red-200 rounded-xl">
            <div class="flex items-start gap-3">
                <i class="pi pi-exclamation-triangle text-lg mt-0.5"></i>
                <div>
                    <div class="font-semibold mb-1">Error en el formulario</div>
                    <div>{{ mensajeErrorGeneral }}</div>
                </div>
            </div>
        </div>

        <div *ngIf="mensajeExito" class="p-4 mb-6 text-sm text-green-700 bg-green-200 rounded-xl">
            <div class="flex items-start gap-3">
                <i class="pi pi-check-circle text-lg mt-0.5"></i>
                <div>
                    <div class="font-semibold mb-1">¬°Registro exitoso!</div>
                    <div>{{ mensajeExito }}</div>
                </div>
            </div>
        </div>

        <!-- Indicador de carga -->
        <div *ngIf="cargando" class="p-6 mb-6 text-center bg-green-50 border border-green-200 rounded-xl">
            <div class="flex items-center justify-center gap-3 text-green-700">
                <p-progress-spinner [style]="{ width: '24px', height: '24px' }" strokeWidth="4"></p-progress-spinner>
                <span class="font-medium">Creando tu cuenta...</span>
            </div>
        </div>

        <!-- Formulario de registro -->
        <form [formGroup]="registroFormReactivo" (ngSubmit)="registrar()" class="space-y-6">

            <!-- Informaci√≥n Personal -->
            <div class="border border-gray-200 rounded-xl p-6 bg-gray-50/50">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="pi pi-user text-blue-600"></i>
                    Informaci√≥n Personal
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="nombre" class="block text-sm font-medium text-gray-700 mb-2">Nombre</label>
                        <input type="text" id="nombre" formControlName="nombre"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800 placeholder-gray-400"
                            placeholder="Tu nombre" [class.border-red-500]="tieneError('nombre')">
                        <div *ngIf="tieneError('nombre')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('nombre') }}
                        </div>
                    </div>

                    <div>
                        <label for="apellido" class="block text-sm font-medium text-gray-700 mb-2">Apellido</label>
                        <input type="text" id="apellido" formControlName="apellido"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800 placeholder-gray-400"
                            placeholder="Tu apellido" [class.border-red-500]="tieneError('apellido')">
                        <div *ngIf="tieneError('apellido')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('apellido') }}
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="genero" class="block text-sm font-medium text-gray-700 mb-2">G√©nero</label>
                        <select id="genero" formControlName="genero"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800"
                            [class.border-red-500]="tieneError('genero')">
                            <option value="" class="text-gray-400">Selecciona tu g√©nero</option>
                            <option *ngFor="let genero of generos" [value]="genero.value">{{ genero.label }}</option>
                        </select>
                        <div *ngIf="tieneError('genero')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('genero' )}}
                        </div>
                    </div>

                    <div>
                        <label for="fechaNacimiento" class="block text-sm font-medium text-gray-700 mb-2">Fecha de
                            Nacimiento *</label>
                        <input id="fechaNacimiento" type="date" formControlName="fechaNacimiento"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500"
                            [class.border-red-500]="tieneError('fechaNacimiento')">
                        <div *ngIf="tieneError('fechaNacimiento')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('fechaNacimiento') }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documentos -->
            <div class="border border-gray-200 rounded-xl p-6 bg-blue-50/30">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="pi pi-id-card text-yellow-600"></i>
                    Documentos
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="tipoDocumento" class="block text-sm font-medium text-gray-700 mb-2">Tipo de
                            Documento</label>
                        <select id="tipoDocumento" formControlName="tipoDocumento"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800"
                            [class.border-red-500]="tieneError('tipoDocumento')">
                            <option value="" class="text-gray-400">Selecciona un tipo</option>
                            <option *ngFor="let tipo of tiposDocumento" [value]="tipo.value">{{ tipo.label }}</option>
                        </select>
                        <div *ngIf="tieneError('tipoDocumento')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('tipoDocumento')}}
                        </div>
                    </div>

                    <div>
                        <label for="numDocumento" class="block text-sm font-medium text-gray-700 mb-2">N√∫mero de
                            Documento</label>
                        <input type="text" id="numDocumento" formControlName="numDocumento"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800 placeholder-gray-400"
                            [placeholder]="getPlaceholderDocumento()"
                            [class.border-red-500]="tieneError('numDocumento')">
                        <div *ngIf="tieneError('numDocumento')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('numDocumento')}}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n de Contacto -->
            <div class="border border-gray-200 rounded-xl p-6 bg-purple-50/30">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="pi pi-phone text-green-600"></i>
                    Informaci√≥n de Contacto
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="telefono" class="block text-sm font-medium text-gray-700 mb-2">Tel√©fono</label>
                        <input type="tel" id="telefono" formControlName="telefono"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800 placeholder-gray-400"
                            placeholder="987654321" [class.border-red-500]="tieneError('telefono')">
                        <div *ngIf="tieneError('telefono')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('telefono') }}
                        </div>
                    </div>

                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="email" formControlName="email"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800 placeholder-gray-400"
                            placeholder="tu@email.com" [class.border-red-500]="tieneError('email')">
                        <div *ngIf="tieneError('email')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('email')}}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Seguridad -->
            <div class="border border-gray-200 rounded-xl p-6 bg-red-50/30">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                    <i class="pi pi-lock text-red-600"></i>
                    Seguridad de la Cuenta
                </h3>

                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Contrase√±a</label>
                        <input type="password" id="password" formControlName="password"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800 placeholder-gray-400"
                            placeholder="M√≠nimo 8 caracateres" [class.border-red-500]="tieneError('password')">
                        <div *ngIf="tieneError('password')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('password') }}
                        </div>
                    </div>

                    <div>
                        <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-2">Confirmar
                            Contrase√±a</label>
                        <input type="password" id="confirmPassword" formControlName="confirmPassword"
                            class="w-full rounded-lg border border-gray-300 p-3 shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-800"
                            [class.border-red-500]="tieneError('confirmPassword') || passwordsNoCoinciden()">
                        <div *ngIf="tieneError('confirmPassword')" class="text-xs text-red-600 mt-1">
                            {{ obtenerMensajeError('confirmPassword') }}
                        </div>
                        <div *ngIf="passwordsNoCoinciden()" class="text-xs text-red-600 mt-1">
                            Las constrase√±as no coinciden
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bot√≥n de registro -->
            <div class="pt-4">
                <button type="submit" [disabled]="registroFormReactivo.invalid || cargando"
                    class="w-full flex items-center justify-center gap-3 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold px-6 py-4 text-lg transition-all duration-300 hover:from-green-700 hover:to-emerald-700 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-0.5 disabled:hover:transform-none">
                    <div *ngIf="cargando" class="felx items-center gap-2">
                        <p-progress-spinner [style]="{ width: '28px', height: '20px' }"
                            strokeWidth="4"></p-progress-spinner>
                        <span>Creando cuenta...</span>
                    </div>

                    <div *ngIf="!cargando" class="flex items-center gap-2">
                        <i></i>
                        <span>Crear mi Cuenta</span>
                    </div>
                </button>
            </div>
        </form>

        <!-- Enlaces adicionales -->
        <div class="mt-8 text-center">
            <div class="text-sm text-gray-600">
                ¬øYa tienes una cuenta?
                <a routerLink="/login" class="text-green-600 hover:text-green-700 font-semibold hover:underline">
                    Inicia sesi√≥n aqu√≠
                </a>
            </div>
        </div>
    </div>

    <script>
        // M√©todo adicional para el placeholder din√°mico del documento
        function getPlaceholderDocumento() {
            const tipoDoc = this.registroFormReactivo?.get('tipoDocumento')?.value;
            switch (tipoDoc) {
                case 'DNI':
                    return '12345678 (8 d√≠gitos)';
                case 'Carnet_Extranjeria':
                    return 'CE123456789 (9-12 caracteres)';
                case 'Pasaporte':
                    return 'AB123456 (6-9 caracteres)';
                default:
                    return 'Selecciona el tipo primero';
            }
        }
    </script>
</body>